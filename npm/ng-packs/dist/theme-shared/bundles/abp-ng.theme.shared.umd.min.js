!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@abp/ng.core"),require("@angular/core"),require("@ng-bootstrap/ng-bootstrap"),require("@ngx-validate/core"),require("primeng/components/common/messageservice"),require("primeng/toast"),require("rxjs"),require("rxjs/operators"),require("@angular/router"),require("@ngxs/store"),require("@ngxs/router-plugin"),require("snq"),require("@angular/animations")):"function"==typeof define&&define.amd?define("@abp/ng.theme.shared",["exports","@abp/ng.core","@angular/core","@ng-bootstrap/ng-bootstrap","@ngx-validate/core","primeng/components/common/messageservice","primeng/toast","rxjs","rxjs/operators","@angular/router","@ngxs/store","@ngxs/router-plugin","snq","@angular/animations"],t):t(((e=e||self).abp=e.abp||{},e.abp.ng=e.abp.ng||{},e.abp.ng.theme=e.abp.ng.theme||{},e.abp.ng.theme.shared={}),e.ng_core,e.ng.core,e.ngBootstrap,e.core$1,e.messageservice,e.toast,e.rxjs,e.rxjs.operators,e.ng.router,e.store,e.routerPlugin,e.snq,e.ng.animations)}(this,function(e,t,n,o,r,i,s,a,c,l,p,d,u,m){"use strict";u=u&&u.hasOwnProperty("default")?u.default:u;var f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function g(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var h=function(){return(h=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}var y=function(){function e(e){this.messageService=e,this.key="abpToast",this.sticky=!1}return e.prototype.info=function(e,t,n){return this.show(e,t,"info",n)},e.prototype.success=function(e,t,n){return this.show(e,t,"success",n)},e.prototype.warn=function(e,t,n){return this.show(e,t,"warn",n)},e.prototype.error=function(e,t,n){return this.show(e,t,"error",n)},e.prototype.show=function(e,t,n,o){return this.messageService.clear(this.key),this.messageService.add(h({severity:n,detail:e,summary:t},o,{key:this.key},void 0===(o||{}).sticky&&{sticky:this.sticky})),this.status$=new a.Subject,this.status$},e.prototype.clear=function(e){this.messageService.clear(this.key),this.status$.next(e||"dismiss"),this.status$.complete()},e}();var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.key="abpConfirmation",t.sticky=!0,t}return g(t,e),t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t(n.ɵɵinject(i.MessageService))},token:t,providedIn:"root"}),t}(y);var C=function(){function e(e){this.confirmationService=e,this.confirm="confirm",this.reject="reject",this.dismiss="dismiss"}return e.prototype.close=function(e){this.confirmationService.clear(e)},e.decorators=[{type:n.Component,args:[{selector:"abp-confirmation",template:'\n    <p-toast\n      position="center"\n      key="abpConfirmation"\n      (onClose)="close(dismiss)"\n      [modal]="true"\n      [baseZIndex]="1000"\n      styleClass=""\n    >\n      <ng-template let-message pTemplate="message">\n        <div *ngIf="message.summary" class="modal-header">\n          <h4 class="modal-title">\n            {{ message.summary | abpLocalization: message.titleLocalizationParams }}\n          </h4>\n        </div>\n        <div class="modal-body">\n          {{ message.detail | abpLocalization: message.messageLocalizationParams }}\n        </div>\n\n        <div class="modal-footer justify-content-center">\n          <button *ngIf="!message.hideCancelBtn" type="button" class="btn btn-secondary" (click)="close(reject)">\n            {{ message.cancelCopy || \'AbpIdentity::Cancel\' | abpLocalization }}\n          </button>\n          <button *ngIf="!message.hideYesBtn" type="button" class="btn btn-secondary" (click)="close(confirm)">\n            <span>{{ message.yesCopy || \'AbpIdentity::Yes\' | abpLocalization }}</span>\n          </button>\n        </div>\n      </ng-template>\n    </p-toast>\n  '}]}],e.ctorParameters=function(){return[{type:v}]},e}();var x=function(){function e(){this.title="Oops!",this.details="Sorry, an error has occured."}return e.prototype.destroy=function(){this.renderer.removeChild(this.host,this.elementRef.nativeElement)},e.decorators=[{type:n.Component,args:[{selector:"abp-error",template:'\n    <div class="error">\n      <button id="abp-close-button mr-2" type="button" class="close" (click)="destroy()">\n        <span aria-hidden="true">&times;</span>\n      </button>\n      <div class="row centered">\n        <div class="col-md-12">\n          <div class="error-template">\n            <h1>\n              {{ title | abpLocalization }}\n            </h1>\n            <div class="error-details">\n              {{ details | abpLocalization }}\n            </div>\n            <div class="error-actions">\n              <a (click)="destroy()" routerLink="/" class="btn btn-primary btn-md mt-2"\n                ><span class="glyphicon glyphicon-home"></span> {{ \'::Menu:Home\' | abpLocalization }}\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  ',styles:[".error{position:fixed;top:0;background-color:#fff;width:100vw;height:100vh;z-index:999999}.centered{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}"]}]}],e}();var w=function(){function e(e,n){var o=this;this.actions=e,this.router=n,this.containerClass="abp-loader-bar",this.progressClass="abp-progress",this.isLoading=!1,this.filter=function(e){return e.payload.url.indexOf("openid-configuration")<0},this.progressLevel=0,e.pipe(p.ofActionSuccessful(t.StartLoader,t.StopLoader),c.filter(this.filter),r.takeUntilDestroy(this)).subscribe(function(e){e instanceof t.StartLoader?o.startLoading():o.stopLoading()}),n.events.pipe(c.filter(function(e){return e instanceof l.NavigationStart||e instanceof l.NavigationEnd}),r.takeUntilDestroy(this)).subscribe(function(e){e instanceof l.NavigationStart?o.startLoading():o.stopLoading()})}return e.prototype.ngOnDestroy=function(){},e.prototype.startLoading=function(){var e=this;this.isLoading=!0;var t=setInterval(function(){e.progressLevel<75?e.progressLevel+=10*Math.random():e.progressLevel<90?e.progressLevel+=.4:e.progressLevel<100?e.progressLevel+=.1:clearInterval(t)},300);this.interval=t},e.prototype.stopLoading=function(){var e=this;clearInterval(this.interval),this.progressLevel=100,this.isLoading=!1,setTimeout(function(){e.progressLevel=0},800)},e.decorators=[{type:n.Component,args:[{selector:"abp-loader-bar",template:'\n    <div id="abp-loader-bar" [ngClass]="containerClass" [class.is-loading]="isLoading">\n      <div [ngClass]="progressClass" [style.width.vw]="progressLevel"></div>\n    </div>\n  ',styles:[".abp-loader-bar{left:0;opacity:0;position:fixed;top:0;transition:opacity .4s linear .4s;z-index:99999}.abp-loader-bar.is-loading{opacity:1;transition:none}.abp-loader-bar .abp-progress{background:#77b6ff;box-shadow:0 0 10px rgba(119,182,255,.7);height:2px;left:0;position:fixed;top:0;transition:width .4s}"]}]}],e.ctorParameters=function(){return[{type:p.Actions},{type:l.Router}]},e.propDecorators={containerClass:[{type:n.Input}],progressClass:[{type:n.Input}],isLoading:[{type:n.Input}],filter:[{type:n.Input}]},e}();var I=function(){function e(){this.buttonClass="btn btn-primary",this.type="button",this.loading=!1,this.disabled=!1}return Object.defineProperty(e.prototype,"icon",{get:function(){return""+(this.loading?"fa fa-spin fa-spinner":this.iconClass||"d-none")},enumerable:!0,configurable:!0}),e.decorators=[{type:n.Component,args:[{selector:"abp-button",template:'\n    <button [attr.type]="type" [ngClass]="buttonClass" [disabled]="loading || disabled">\n      <i [ngClass]="icon" class="mr-1"></i><ng-content></ng-content>\n    </button>\n  '}]}],e.propDecorators={buttonClass:[{type:n.Input}],type:[{type:n.Input}],iconClass:[{type:n.Input}],loading:[{type:n.Input}],disabled:[{type:n.Input}]},e}();var k=function(){function e(e,t){this.renderer=e,this.confirmationService=t,this.centered=!1,this.modalClass="",this.size="lg",this.visibleChange=new n.EventEmitter,this.init=new n.EventEmitter,this._visible=!1,this._busy=!1,this.showModal=!1,this.isOpenConfirmation=!1,this.closable=!1,this.destroy$=new a.Subject}return Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){var t=this;"boolean"==typeof e&&(this.modalContent?e?(this.setVisible(e),this.listen()):(this.closable=!1,this.renderer.addClass(this.modalContent.nativeElement,"fade-out-top"),setTimeout(function(){t.setVisible(e),t.ngOnDestroy()},190)):e&&setTimeout(function(){t.showModal=e,t.visible=e},0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"busy",{get:function(){return this._busy},set:function(e){this.abpSubmit&&this.abpSubmit instanceof I&&(this.abpSubmit.loading=e),this._busy=e},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.setVisible=function(e){var t=this;this._visible=e,this.visibleChange.emit(e),this.showModal=e,e?a.timer(300).pipe(c.take(1)).subscribe(function(e){return t.closable=!0}):this.closable=!1},e.prototype.listen=function(){var e=this;a.fromEvent(document,"keyup").pipe(c.takeUntil(this.destroy$),c.debounceTime(150),c.filter(function(t){return t&&"Escape"===t.code&&e.closable})).subscribe(function(t){e.close()}),setTimeout(function(){e.abpClose&&a.fromEvent(e.abpClose.nativeElement,"click").pipe(c.takeUntil(e.destroy$),c.filter(function(){return!(!e.closable||!e.modalContent)})).subscribe(function(){return e.close()})},0),this.init.emit()},e.prototype.close=function(){var e=this;if(this.closable&&!this.busy)if(function(e){return e.findIndex(function(e){return(e.className||"").indexOf("ng-dirty")>-1})>-1}(function e(t){return Array.from(t).reduce(function(t,n){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}(t,n.childNodes&&n.childNodes.length?e(n.childNodes):[n])},[])}(this.modalContent.nativeElement.querySelector("#abp-modal-body").childNodes))){if(this.isOpenConfirmation)return;this.isOpenConfirmation=!0,this.confirmationService.warn("AbpAccount::AreYouSureYouWantToCancelEditingWarningMessage","AbpAccount::AreYouSure").subscribe(function(t){a.timer(200).subscribe(function(){e.isOpenConfirmation=!1}),"confirm"===t&&(e.visible=!1)})}else this.visible=!1},e.decorators=[{type:n.Component,args:[{selector:"abp-modal",template:'<div\n  *ngIf="showModal"\n  (click)="close()"\n  id="abp-modal"\n  class="modal fade {{ modalClass }} d-block show"\n  [style.padding-right.px]="\'15\'"\n>\n  <div\n    id="abp-modal-container"\n    class="modal-dialog modal-{{ size }} fade-in-top"\n    tabindex="-1"\n    [class.modal-dialog-centered]="centered"\n    #abpModalContent\n  >\n    <div #content id="abp-modal-content" class="modal-content" (click)="$event.stopPropagation()">\n      <div id="abp-modal-header" class="modal-header">\n        <ng-container *ngTemplateOutlet="abpHeader"></ng-container>\n\n        <button id="abp-modal-close-button" type="button" class="close" (click)="close()">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div\n        id="abp-modal-body"\n        class="modal-body"\n        [style.height]="height || undefined"\n        [style.minHeight]="minHeight || undefined"\n      >\n        <ng-container *ngTemplateOutlet="abpBody"></ng-container>\n\n        <div id="abp-modal-footer" class="modal-footer">\n          <ng-container *ngTemplateOutlet="abpFooter"></ng-container>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <ng-content></ng-content>\n</div>\n'}]}],e.ctorParameters=function(){return[{type:n.Renderer2},{type:v}]},e.propDecorators={visible:[{type:n.Input}],busy:[{type:n.Input}],centered:[{type:n.Input}],modalClass:[{type:n.Input}],size:[{type:n.Input}],height:[{type:n.Input}],minHeight:[{type:n.Input}],visibleChange:[{type:n.Output}],init:[{type:n.Output}],abpHeader:[{type:n.ContentChild,args:["abpHeader",{static:!1}]}],abpBody:[{type:n.ContentChild,args:["abpBody",{static:!1}]}],abpFooter:[{type:n.ContentChild,args:["abpFooter",{static:!1}]}],abpClose:[{type:n.ContentChild,args:["abpClose",{static:!1,read:n.ElementRef}]}],abpSubmit:[{type:n.ContentChild,args:[I,{static:!1,read:I}]}],modalContent:[{type:n.ViewChild,args:["abpModalContent",{static:!1}]}],abpButtons:[{type:n.ViewChildren,args:["abp-button"]}]},e}();var A=function(){function e(){}return e.decorators=[{type:n.Component,args:[{selector:"abp-toast",template:'\n    <p-toast position="bottom-right" key="abpToast" [baseZIndex]="1000">\n      <ng-template let-message pTemplate="message">\n        <span\n          class="ui-toast-icon pi"\n          [ngClass]="{\n            \'pi-info-circle\': message.severity == \'info\',\n            \'pi-exclamation-triangle\': message.severity == \'warn\',\n            \'pi-times\': message.severity == \'error\',\n            \'pi-check\': message.severity == \'success\'\n          }"\n        ></span>\n        <div class="ui-toast-message-text-content">\n          <div class="ui-toast-summary">{{ message.summary | abpLocalization: message.titleLocalizationParams }}</div>\n          <div class="ui-toast-detail">{{ message.detail | abpLocalization: message.messageLocalizationParams }}</div>\n        </div>\n      </ng-template>\n    </p-toast>\n  '}]}],e}(),L="\n.is-invalid .form-control {\n  border-color: #dc3545;\n  border-style: solid !important;\n}\n\n.is-invalid .invalid-feedback,\n.is-invalid + * .invalid-feedback {\n  display: block;\n}\n\n.data-tables-filter {\n  text-align: right;\n}\n\n.pointer {\n  cursor: pointer;\n}\n\n.navbar .dropdown-submenu a::after {\n  transform: rotate(-90deg);\n  position: absolute;\n  right: 16px;\n  top: 18px;\n}\n\n.navbar .dropdown-menu {\n  min-width: 215px;\n}\n\n.modal {\n background-color: rgba(0, 0, 0, .6);\n}\n\n.abp-ellipsis {\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* <animations */\n\n.fade-in-top {\n  animation: fadeInTop 0.2s ease-in-out;\n}\n\n.fade-out-top {\n  animation: fadeOutTop 0.2s ease-in-out;\n}\n\n\n@keyframes fadeInTop {\n  from {\n    transform: translateY(-5px);\n    opacity: 0;\n  }\n\n  to {\n    transform: translateY(5px);\n    opacity: 1;\n  }\n}\n\n@keyframes fadeOutTop {\n  to {\n    transform: translateY(-5px);\n    opacity: 0;\n  }\n}\n\n/* </animations */\n\n",E={defaultError:{message:"An error has occurred!",details:"Error detail not sent by server."},defaultError401:{message:"You are not authenticated!",details:"You should be authenticated (sign in) in order to perform this operation."},defaultError403:{message:"You are not authorized!",details:"You are not allowed to perform this operation."},defaultError404:{message:"Resource not found!",details:"The resource requested could not found on the server."}},S=function(){function e(e,n,o,r,i,s,a){var c=this;this.actions=e,this.store=n,this.confirmationService=o,this.appRef=r,this.cfRes=i,this.rendererFactory=s,this.injector=a,e.pipe(p.ofActionSuccessful(t.RestOccurError)).subscribe(function(e){var t=e.payload,n=void 0===t?{}:t,o=u(function(){return n.error.error},E.defaultError.message);if(n.headers.get("_AbpErrorFormat")){var r=c.showError(null,null,o);401===n.status&&r.subscribe(function(){c.navigateToLogin()})}else switch(n.status){case 401:c.showError(E.defaultError401.details,E.defaultError401.message).subscribe(function(){return c.navigateToLogin()});break;case 403:c.createErrorComponent({title:E.defaultError403.message,details:E.defaultError403.details});break;case 404:c.showError(E.defaultError404.details,E.defaultError404.message);break;case 500:c.createErrorComponent({title:"500",details:"AbpAccount::InternalServerErrorMessage"});break;case 0:"Unknown Error"===n.statusText&&c.createErrorComponent({title:"Unknown Error",details:"AbpAccount::InternalServerErrorMessage"});break;default:c.showError(E.defaultError.details,E.defaultError.message)}})}return e.prototype.showError=function(e,t,n){return n&&(n.details?(e=n.details,t=n.message):e=n.message||E.defaultError.message),this.confirmationService.error(e,t,{hideCancelBtn:!0,yesCopy:"OK"})},e.prototype.navigateToLogin=function(){this.store.dispatch(new d.Navigate(["/account/login"],null,{state:{redirectUrl:this.store.selectSnapshot(d.RouterState).state.url}}))},e.prototype.createErrorComponent=function(e){var t=this.rendererFactory.createRenderer(null,null),n=t.selectRootElement("app-root",!0),o=this.cfRes.resolveComponentFactory(x).create(this.injector);for(var r in o.instance)o.instance.hasOwnProperty(r)&&(o.instance[r]=e[r]);this.appRef.attachView(o.hostView),t.appendChild(n,o.hostView.rootNodes[0]),o.instance.renderer=t,o.instance.elementRef=o.location,o.instance.host=n},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:p.Actions},{type:p.Store},{type:v},{type:n.ApplicationRef},{type:n.ComponentFactoryResolver},{type:n.RendererFactory2},{type:n.Injector}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(p.Actions),n.ɵɵinject(p.Store),n.ɵɵinject(v),n.ɵɵinject(n.ApplicationRef),n.ɵɵinject(n.ComponentFactoryResolver),n.ɵɵinject(n.RendererFactory2),n.ɵɵinject(n.INJECTOR))},token:e,providedIn:"root"}),e}();var j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),Object.defineProperty(t.prototype,"abpErrors",{get:function(){return this.errors&&this.errors.length?this.errors.map(function(e){if(!e.message)return e;var t=e.message.indexOf("[");return t>-1?h({},e,{message:e.message.slice(0,t),interpoliteParams:e.message.slice(t+1,e.message.length-1).split(",")}):e}):[]},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Component,args:[{selector:"abp-validation-error",template:'\n    <div class="invalid-feedback" *ngFor="let error of abpErrors; trackBy: trackByFn">\n      {{ error.message | abpLocalization: error.interpoliteParams }}\n    </div>\n  ',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None}]}],t}(r.ValidationErrorComponent);function O(e){return function(){var n=e.get(t.LazyLoadService);return a.forkJoin(n.load(null,"style",L,"head","afterbegin")).pipe(c.take(1))}}var M,T=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:n.APP_INITIALIZER,multi:!0,deps:[n.Injector,S],useFactory:O},{provide:i.MessageService,useClass:i.MessageService}]}},e.decorators=[{type:n.NgModule,args:[{imports:[t.CoreModule,s.ToastModule,o.NgbModalModule,r.NgxValidateCoreModule.forRoot({targetSelector:".form-group",blueprints:{email:"AbpAccount::ThisFieldIsNotAValidEmailAddress.",max:"AbpAccount::ThisFieldMustBeAStringWithAMaximumLengthOf{1}[{{ max }}]",maxlength:"AbpAccount::ThisFieldMustBeAStringWithAMaximumLengthOf{1}[{{ requiredLength }}]",min:"AbpAccount::ThisFieldMustBeAStringWithAMinimumLengthOf{1}AndAMaximumLengthOf{0}[{{ min }},{{ max }}]",minlength:"AbpAccount::ThisFieldMustBeAStringWithAMinimumLengthOf{1}AndAMaximumLengthOf{0}[{{ min }},{{ max }}]",required:"AbpAccount::ThisFieldIsRequired.",passwordMismatch:"AbpIdentity::Identity.PasswordConfirmationFailed"},errorTemplate:j})],declarations:[I,C,A,k,x,w,j],exports:[o.NgbModalModule,I,C,A,k,w],entryComponents:[x,j]}]}],e}(),P=m.trigger("routeAnimations",[m.state("void",m.style({"margin-top":"20px",opacity:"0"})),m.state("*",m.style({"margin-top":"0px",opacity:"1"})),m.transition(":enter",[m.animate("0.2s ease-out",m.style({opacity:"1","margin-top":"0px"}))])]);!function(e){function t(){}e.Options=t}(M||(M={})),function(t){function n(){}(e.Toaster||(e.Toaster={})).Options=n}();var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.addAll=function(e){var t=this;this.messageService.addAll(e.map(function(e){return h({key:t.key},e)}))},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t(n.ɵɵinject(i.MessageService))},token:t,providedIn:"root"}),t}(y);e.ButtonComponent=I,e.ConfirmationComponent=C,e.ConfirmationService=v,e.LoaderBarComponent=w,e.ModalComponent=k,e.ThemeSharedModule=T,e.ToastComponent=A,e.ToasterService=R,e.appendScript=O,e.slideFromBottom=P,e.ɵa=j,e.ɵb=I,e.ɵc=C,e.ɵd=v,e.ɵe=y,e.ɵf=A,e.ɵg=k,e.ɵh=x,e.ɵi=w,e.ɵj=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=abp-ng.theme.shared.umd.min.js.map